<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Coin Flip Simulation</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Stat 223</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="syllabus.html">Syllabus</a>
</li>
<li>
  <a href="notes.html">Notes</a>
</li>
<li>
  <a href="assignments.html">Assignments</a>
</li>
<li>
  <a href="resources.html">Resources</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Coin Flip Simulation</h1>

</div>


<div id="single-coin" class="section level3">
<h3>Single coin</h3>
<p>Randomly sample one value from the set [0, 1] where the probability of 0 is 3/4 and the probability of 1 is 1/4.</p>
<pre class="r"><code>sample(c(0, 1), 1, prob = c(3/4, 1/4))</code></pre>
<pre><code>## [1] 0</code></pre>
<p>Simulate the process of tossing a bent coin one time, where the probability of a head is p = 1/4</p>
<pre class="r"><code>sample(c(0, 1), 1, prob = c(3/4, 1/4))</code></pre>
<pre><code>## [1] 0</code></pre>
</div>
<div id="multiple-coins" class="section level3">
<h3>Multiple coins</h3>
<p>Simulate the process of tossing a bent coin 60 times, where the probability of a head is p = 1/4.</p>
<pre class="r"><code>sample(c(0, 1), 60, prob = c(3/4, 1/4), replace = TRUE)</code></pre>
<pre><code>##  [1] 1 0 0 1 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 1 1 0 1 0 0 0
## [36] 1 0 0 0 0 0 0 0 0 0 1 1 0 0 1 1 0 0 0 0 0 0 0 1 1</code></pre>
<pre class="r"><code>sample(c(0, 1), 60, prob = c(3/4, 1/4), replace = TRUE)</code></pre>
<pre><code>##  [1] 0 1 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 1 1 0 0
## [36] 1 1 1 0 0 1 0 1 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 1 0</code></pre>
<p>Notice that the results above are different - why?</p>
<p>You can use <code>set.seed()</code> to ensure results are identical when random elements are involved.</p>
<pre class="r"><code>set.seed(35487)
sample(c(0, 1), 60, prob = c(3/4, 1/4), replace = TRUE)</code></pre>
<pre><code>##  [1] 0 0 0 0 1 0 0 0 0 0 1 0 0 1 1 0 0 0 1 0 0 0 1 1 0 1 0 0 1 1 0 0 0 0 0
## [36] 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0</code></pre>
<pre class="r"><code>set.seed(35487)
sample(c(0, 1), 60, prob = c(3/4, 1/4), replace = TRUE)</code></pre>
<pre><code>##  [1] 0 0 0 0 1 0 0 0 0 0 1 0 0 1 1 0 0 0 1 0 0 0 1 1 0 1 0 0 1 1 0 0 0 0 0
## [36] 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0</code></pre>
</div>
<div id="simulation-study" class="section level3">
<h3>Simulation study</h3>
<p>Now that we have the building blocks, we’ll simulate this process multiple times to provide a reliable estimate of the average number of heads out of 60 tosses. There are multiple approaches that can be used here, and we’ll look at each one.</p>
<p>In order to build these simulation examples, let’s setup a few things first. We’ll define the number of simulations we run as <code>n_sims</code> and we’ll also create a function for a single “run” of the simulation.</p>
<pre class="r"><code>n_sims &lt;- 1000

flip_coins &lt;- function(n_flips = 60) {
  sample(c(0, 1), n_flips, prob = c(3, 1), replace = TRUE)
}</code></pre>
<div id="for-loop" class="section level4">
<h4>For Loop</h4>
<p>For loops are a staple programming concept. However, given R’s ability to vectorize operations and other R-centric functions (the <code>apply</code> family), there are often better ways to iterate through objects.</p>
<pre class="r"><code>heads &lt;- numeric(n_sims)
for (i in seq_along(heads)) {
  heads[i] &lt;- sum(flip_coins())
}</code></pre>
<p>Now that we have the number of heads that appeared in 1000 simulations of flipping this coin 60 times, we can compute the average number of heads that appear in this scenario.</p>
<pre class="r"><code>mean(heads)</code></pre>
<pre><code>## [1] 14.99</code></pre>
</div>
<div id="sapply-function" class="section level4">
<h4>Sapply function</h4>
<pre class="r"><code>heads &lt;- sapply(1:n_sims, function(x) sum(flip_coins()))</code></pre>
</div>
<div id="replicate-function" class="section level4">
<h4>Replicate function</h4>
<p><code>replicate</code> is part of the <code>apply</code> family and it lends itself well to simulation studies.</p>
<pre class="r"><code>heads &lt;- replicate(n = n_sims, sum(flip_coins()))</code></pre>
</div>
<div id="tidyverse" class="section level4">
<h4>Tidyverse</h4>
<p>The <a href="https://www.tidyverse.org/">tidyverse</a> &quot; is an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures.&quot;</p>
<p>The <code>purrr</code> package is part of the <code>tidyverse</code> and provides an alternative to the <code>apply</code> family of functions.</p>
<pre class="r"><code># install.packages(&quot;tidyverse&quot;)
library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ───────────────────</code></pre>
<pre><code>## ✔ ggplot2 3.0.0     ✔ purrr   0.2.5
## ✔ tibble  1.4.2     ✔ dplyr   0.7.6
## ✔ tidyr   0.8.1     ✔ stringr 1.3.1
## ✔ readr   1.1.1     ✔ forcats 0.3.0</code></pre>
<pre><code>## ── Conflicts ─── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>rerun(n_sims, flip_coins()) %&gt;% 
  map_dbl(sum) %&gt;% 
  mean()</code></pre>
<pre><code>## [1] 15.16</code></pre>
</div>
</div>
<div id="calculations" class="section level3">
<h3>Calculations</h3>
<p>So far, we’ve used our simulated data to determine the average number of heads in a set of 60 unfair coin flips. We can also use this data to calculate other metrics.</p>
<p>Determine the variance of the number of heads in 60 coin flips.</p>
<pre class="r"><code>var(heads)</code></pre>
<pre><code>## [1] 11.63123</code></pre>
<p>We can also find the probability that the number of heads in 60 tosses is greater than 20.</p>
<pre class="r"><code>mean(heads &gt; 20)</code></pre>
<pre><code>## [1] 0.058</code></pre>
<p>Finally, we can ind the 20th percentile of the number of heads in 60 tosses.</p>
<pre class="r"><code>quantile(heads, 0.25)</code></pre>
<pre><code>## 25% 
##  13</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
